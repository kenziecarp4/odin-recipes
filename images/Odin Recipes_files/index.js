import { p as pe } from '../index.js';
import { a, o, g as g$1, r as r$1 } from '../create.js';
import { r, t } from '../transframe-provider.js';

var s={xml2json:l};function l(e){return e=function(e){return e=e.replace(/<!--[\s\S]*?-->/g,""),e=e.replace(/\n|\t|\r/g,""),e=e.replace(/ {1,}<|\t{1,}</g,"<"),e=e.replace(/> {1,}|>\t{1,}/g,">"),e=e.replace(/<\?[^>]*\?>/g,""),e=function(e){var t=e.match(/<[^/][^>]*\/>/g);if(t)for(var n=0;n<t.length;n++){var a=t[n],r=a.substring(0,a.length-2);r+=">";var i=a.match(/[^<][\w+$]*/)[0],o="</"+i+">",s="<"+i+">",l=r.match(/(\S+)=["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?/g);if(l)for(var u=0;u<l.length;u++){var c=l[u],d=c.substring(0,c.indexOf("="));s+="<"+d+">"+c.substring(c.indexOf('"')+1,c.lastIndexOf('"'))+"</"+d+">";}s+=o,e=e.replace(a,s);}return e}(e),e=function(e){var t=e.match(/<[^\/][^>][^<]+\s+.[^<]+[=][^<]+>{1}([^<]+)/g);if(t)for(var n=0;n<t.length;n++){var a=t[n],r=a.substring(0,a.indexOf(">")+1)+"<_@ttribute>"+a.substring(a.indexOf(">")+1)+"</_@ttribute>";e=e.replace(a,r);}return e}(e),e=function(e){var t=e.match(/<[^\/][^>][^<]+\s+.[^<]+[=][^<]+>/g);if(t)for(var n=0;n<t.length;n++){var a=t[n],r="<"+a.match(/[^<][\w+$]*/)[0]+">",i=a.match(/(\S+)=["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?/g);if(i)for(var o=0;o<i.length;o++){var s=i[o],l=s.substring(0,s.indexOf("="));r+="<"+l+">"+s.substring(s.indexOf('"')+1,s.lastIndexOf('"'))+"</"+l+">";}e=e.replace(a,r);}return e}(e),e}(e),function(e){var t,n,a,r,i,o={};for(;e.match(/<[^\/][^>]*>/);)t=(i=e.match(/<[^\/][^>]*>/)[0]).substring(1,i.length-1),-1==(n=e.indexOf(i.replace("<","</")))&&(t=i.match(/[^<][\w+$]*/)[0],-1==(n=e.indexOf("</"+t))&&(n=e.indexOf("<\\/"+t))),r=(a=e.substring(i.length,n)).match(/<[^\/][^>]*>/)?l(a):a,void 0===o[t]?o[t]=r:Array.isArray(o[t])?o[t].push(r):o[t]=[o[t],r],e=e.substring(2*i.length+1+a.length);return o}(e)}var u,c,d,p=((d=p||{}).TWITCH="twitch",d.YOUTUBE="youtube",d.KICK="kick",d),h=((c=h||{}).LIVE_DATA="liveData",c.CHAT_DATA="chatData",c.SOCIALS="socials",c.CHANNEL_INFO="channelInfo",c.POSTS="posts",c),m=((u=m||{}).DISCORD="discord",u.TIKTOK="tiktok",u.INSTAGRAM="instagram",u.TWITTER="twitter",u.SPOTIFY="spotify",u.TWITCH="twitch",u.YOUTUBE="youtube",u),g=class{static setFetch(e){this.fetchToText=e;}static getChannels(){throw new Error("Not Implemented")}static async getChannelData({sourceId:e,sourceName:t,postSourceId:n,dataTypes:a}){let r={},i={};return await Promise.all(a.map((async a=>{let o=this.dataTypesMap[a];if(!o)throw new Error(`Unsupported dataType: ${a} for platform`);let{urlFn:s,parseFn:l}=o,u=await s({sourceId:e,sourceName:t,postSourceId:n}),c=i[u]||this.fetchToText(u);i[u]=c;let d=await c;r[a]=l(d);}))),r}};function f(e){let t=e.replace(/,/g,""),n=parseInt(t,10);return isNaN(n)?null:n}function w(e){return [...e.matchAll(/<meta\s+property="([^"]+)"\s+content="([^"]+)"\s*\/?>/g)].reduce(((e,t)=>{let n=t[1],a=t[2],r=n.replace(/[:_]+(.)/g,((e,t)=>t.toUpperCase()));if("ogImage"===r)return e[r]||(e[r]=[]),e[r].push({url:a}),e;if(r.startsWith("ogImage")&&Array.isArray(e.ogImage)){let t=r.replace("ogImage","").toLowerCase();e.ogImage[e.ogImage.length-1][t]=a;}else e[r]||(e[r]=[]),e[r].push(a);return e}),{})}function y({obj:e,key:t,value:n,depth:a}){let r=[];return function e(t){let{obj:n,key:i,value:o,parents:s=[]}=t;if(null==o&&n[i]||o&&n[i]===o){let e=s.length-a;e>=0&&r.push(s[e]);}else Object.entries(n).forEach((([t,r])=>{if("object"==typeof r&&null!==r){let t=s.concat(n);e({obj:r,key:i,value:o,depth:a,parents:t});}}));}({obj:e,key:t,value:n,depth:a}),r}g.fetchToText=(e,t,n)=>fetch(e,{...t||{},headers:{"User-Agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36",...t?.headers||{}}}).then((e=>e.text()));var v=class e extends g{static async _getLiveUrl({sourceId:t,sourceName:n,postSourceId:a}){return a?`https://www.youtube.com/watch?v=${a}`:n?`https://www.youtube.com/@${n}/live`:e._getLiveUrlBySourceId(t)}static _parseChatData(e){let t=_(e);return {iframeContinuation:(n=t,n.contents?.twoColumnWatchNextResults||console.log("no ytInitialData.contents?.twoColumnWatchNextResults",JSON.stringify(n)),n.contents?.twoColumnWatchNextResults?.conversationBar.liveChatRenderer.header.liveChatHeaderRenderer.viewSelector.sortFilterSubMenuRenderer.subMenuItems[1]?.continuation?.reloadContinuationData?.continuation)};var n;}static _parseLiveData(t){let n=_(t),a=w(t),r=a.alWebUrl?.[0]?.includes("/live")&&!function(e){let t=_(e,"ytInitialPlayerResponse");return y({obj:t,key:"offlineSlate",depth:1}).length>0}(t),i=a.ogUrl?.[0],o=i?.split("v=")?.[1];if(r&&!o)throw new Error(`No id found in url ${i}, Most likely livestream has ended or channel has multiple live streams but this should not happen`);return r?{startDate:I(t),ccv:e.getCcvByYtInitialData(n),category:e.getCategoryByYtInitialData(n),platform:"youtube",title:a.ogTitle?.[0],description:a.ogDescription?.[0],likes:e.getLiveLikesByYtInitialData(n),thumbnail:a.ogImage?.[0]?.url?a.ogImage[0].url:null,url:a.ogUrl?.[0],id:o}:null}static _parseChannelInfo(t){let n=_(t),a=w(t);return {images:{bannerFileUrl:e.getBannerByYtInitialData(n),avatarFileUrl:a.ogImage?.[0]?.url},name:a.ogTitle?.[0],id:n?.metadata?.channelMetadataRenderer?.externalId,username:S(n),url:`https://youtube.com/@${S(n)}`}}static _parseSocials(e){let t=_(e),n=y({obj:t,key:"title",value:"About",depth:1})[0]?.tabRenderer.content.sectionListRenderer.contents[0].itemSectionRenderer.contents[0].channelAboutFullMetadataRenderer.links;return n&&0!==n.length?function(e){let t=new Set(["discord","tiktok","instagram","twitter","spotify","twitch"]);return e.reduce(((e,n)=>{let a=n.channelExternalLinkViewModel.title.content.toLowerCase();return t.has(a)&&(e[a]=`https://${n.channelExternalLinkViewModel.link.content}`),e}),{})}(n):{}}static _parsePosts(e){try{let t=s.xml2json(e)?.feed?.entry;return t&&!Array.isArray(t)&&(t=[t]),t?.map(C)||[]}catch{return []}}static async _getLiveUrlBySourceId(t){let n=`https://www.youtube.com/channel/${t}/live`;return `https://youtube.com/@${S(_(await e.fetchToText(n)))}/live`}static async getChannels(){let t=await e.fetchToText("https://www.youtube.com/feed/channels");return n=t,(_(n).contents.twoColumnBrowseResultsRenderer.tabs[0]?.tabRenderer.content.sectionListRenderer.contents[0].itemSectionRenderer.contents[0].shelfRenderer.content.expandedShelfContentsRenderer.items).map((e=>({id:e.channelRenderer.channelId,name:e.channelRenderer.title.simpleText,platform:"youtube",images:{avatarFileUrl:"https://"+e.channelRenderer.thumbnail.thumbnails[0].url.slice(2)},url:`https://youtube.com/${e.channelRenderer.navigationEndpoint.browseEndpoint.canonicalBaseUrl}`})));var n;}static async getChatContinuationInfo(t){let n=await e.fetchToText("https://youtube.com/live_chat?continuation="+t),a=_(n),r=JSON.parse(/(?:ytcfg\s*.set)\(({[\s\S]+?})\)\s*;/.exec(n)?.[1]);return {apiKey:r.INNERTUBE_API_KEY,context:r.INNERTUBE_CONTEXT,continuationToken:(i=a,i.continuationContents?.liveChatContinuation?.continuations?.[0]?.timedContinuationData?.continuation??i.continuationContents?.liveChatContinuation?.continuations?.[0].invalidationContinuationData?.continuation??i.continuationContents?.liveChatContinuation?.continuations?.[0].reloadContinuationData?.continuation)};var i;}static getLiveLikesByYtInitialData(e){let t=y({obj:e,key:"iconType",value:"LIKE",depth:3});return t[0]?.likeCount?parseInt(t[0].likeCount):null}static getCategoryByYtInitialData(e){let t=y({obj:e,key:"style",value:"RICH_METADATA_RENDERER_STYLE_BOX_ART",depth:1});return t[0]?.richMetadataRenderer?.title?.simpleText?t[0].richMetadataRenderer.title.simpleText:null}static getCcvByYtInitialData(e){let t=y({obj:e,key:"videoViewCountRenderer",depth:1}),n=(a=t[0]?.viewCount.videoViewCountRenderer.viewCount,a?.runs?.[0]?.text??a?.simpleText??"");var a;return n?f(n):null}static getBannerByYtInitialData(e){return y({obj:e,key:"style",value:"C4_TABBED_HEADER_RENDERER_STYLE_MODERN",depth:1})?.[0]?.c4TabbedHeaderRenderer?.banner?.thumbnails?.[0]?.url}};v.dataTypesMap={liveData:{urlFn:v._getLiveUrl,parseFn:v._parseLiveData},chatData:{urlFn:v._getLiveUrl,parseFn:v._parseChatData},channelInfo:{urlFn:async({sourceId:e,sourceName:t})=>t?`https://www.youtube.com/@${t}/about`:`https://www.youtube.com/channel/${e}/about`,parseFn:v._parseChannelInfo},socials:{urlFn:async({sourceId:e,sourceName:t})=>t?`https://www.youtube.com/@${t}/about`:`https://www.youtube.com/channel/${e}/about`,parseFn:v._parseSocials},posts:{urlFn:async({sourceId:e})=>(function(e){if(!e)throw new Error("No sourceId Provided")}(e),`https://www.youtube.com/feeds/videos.xml?channel_id=${e}`),parseFn:v._parsePosts}};var b=v;function I(e){let t=/<meta itemprop="startDate" content="([\s\S]*?)">/gi.exec(e);if(!t)return null;let n=t[1];return new Date(n)}function C(e){return {id:e["yt:videoId"],title:T(e.title),description:T(e["media:group"]["media:description"]),url:e.link.href,format:"video",thumbnailFileUrl:e["media:group"].media?.[1]?.url?.replace("hqdefault","mqdefault"),postTime:new Date(e.published),viewCount:f(e["media:group"]["media:community"]?.media?.[1]?.views||"0")}}function T(e){return e&&e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x60;/g,"`").replace(/&#x27;/g,"'").replace(/&#39;/g,"'")}function _(e,t="ytInitialData"){let n=new RegExp(`(?:window\\s*\\[\\s*["']${t}["']\\s*\\]|${t})\\s*=\\s*({.+?})\\s*;`).exec(e);return JSON.parse(n?.[1]??"{}")}function S(e){return y({obj:e,key:"webPageType",value:"WEB_PAGE_TYPE_CHANNEL",depth:1})[0].webCommandMetadata.url?.match(/\/@([\s\S]*?)($|\/)/)?.[1]?.toLowerCase()}var R=class extends g{static _parseLiveData(e){return function(e){let t=D(e),n=function(e){return e.match(/client:Stream}\|{(\d+)/)?.[1]}(e),a=function(e){let t=E(e,"Game"),n=e?.props?.relayQueryRecords?.[`Game}|{${t}`]?.name;return n||null}(t),r=!(!a||!n),i=w(e);return r?{startDate:N(n,t),ccv:O(n,t),category:a,platform:"twitch",title:i.ogDescription?.[0],description:"",likes:null,thumbnail:i.ogImage?.[0].url,url:i.ogUrl?.[0],id:n}:null}(e)}static _parseChannelInfo(e){return function(e){let t=D(e),n=E(t,"User"),a=function(e){let t=E(e,"User");return e?.props?.relayQueryRecords?.[`User}|{${t}`]?.login?.toLowerCase()}(t);return {images:{avatarFileUrl:L(t),bannerFileUrl:""},name:a,id:n,username:a,url:`https://twitch.tv/${a}`}}(e)}static async getChannels(){let e=await this.fetchToText("https://gql.twitch.tv/gql",{body:JSON.stringify([{operationName:"PersonalSections",variables:{input:{sectionInputs:["FOLLOWED_SECTION"],recommendationContext:{platform:"web",clientApp:"twilight",channelName:null,categoryName:null,lastChannelName:null,lastCategoryName:null,pageviewContent:null,pageviewContentType:null,pageviewLocation:null,pageviewMedium:null,previousPageviewContent:null,previousPageviewContentType:null,previousPageviewLocation:null,previousPageviewMedium:null}},creatorAnniversariesExperimentEnabled:!1},extensions:{persistedQuery:{version:1,sha256Hash:"f8cc9b91bb629f2d09dd8299d9f07c4daefe019236a19fc12fa2b14eb95c359e"}}}]),method:"POST"},{headersToRemove:["origin"]});return JSON.parse(e)[0].data.personalSections[0].items.map((e=>({id:e.user.id,name:e.user.displayName,platform:"twitch",images:{avatarFileUrl:e.user.profileImageURL},url:`https://twitch.tv/${e.user.login}`})))}};function x(e){if(!e)throw new Error("No Source Name Provided")}function D(e){let t=/<script id="__NEXT_DATA__" type="application\/json">(.*?)<\/script>/g.exec(e);if(!t)throw new Error("No Next Data Found");return JSON.parse(t[1])}function E(e,t){return Object.keys(e.props.relayQueryRecords||[]).find((e=>e.startsWith(`${t}}|`)))?.split("}|{")[1]}function L(e){let t=E(e,"User");return e?.props?.relayQueryRecords?.[`User}|{${t}`]?.["profileImageURL(width:150)"]}function N(e,t){let n=t?.props?.relayQueryRecords?.[`Broadcast}|{${e}`]?.startedAt;return n?new Date(n):(console.error("no date found",E(t,"User")),new Date)}function O(e,t){let n=t?.props?.relayQueryRecords?.[`Stream}|{${e}`]?.viewersCount;return n||(console.error("no ccv found"),null)}R.dataTypesMap={liveData:{urlFn:async({sourceName:e})=>(x(e),`https://m.twitch.tv/${e}`),parseFn:R._parseLiveData},channelInfo:{urlFn:async({sourceName:e})=>(x(e),`https://m.twitch.tv/${e}`),parseFn:R._parseChannelInfo}};var U=class{constructor(){t(this,"_isListening",!1),t(this,"_messageHandler",(()=>{})),t(this,"_messageHandlerWrapper",(e=>{const t=e=>{"string"!=typeof e&&(e=JSON.stringify(e)),window.ReactNativeWebView?.postMessage(e);},n={fromId:void 0};"string"==typeof e.data?this._messageHandler(JSON.parse(e.data),t,n):this._messageHandler(e.data,t,n);}));}get isListening(){return this._isListening}listen(){window.addEventListener?.("message",this._messageHandlerWrapper,!0),this._isListening=!0;}close(){window.addEventListener?.("message",this._messageHandlerWrapper,!0),this._isListening=!1;}onMessage(e){this._messageHandler=e;}registerFrame(e,t){console.warn("Method not implemented.");}};var F=class{},A=new class extends F{getPageInfo(){return {title:document.title,url:window.location.href,site:"genericSite",entities:[],tags:[]}}},P=/[a-zA-Z0-9_]+/,k=new class extends F{getPageInfo(){let e="",t=[];if("player.twitch.tv"===window.location.hostname.replace(/^www\./,"")){let t=new URLSearchParams(window.location.search);e=Object.fromEntries(t.entries()).channel||"";}else e=window.location.pathname.match(P)?.[0]||"";return e&&t.push("twitch-live-now"),{title:document.title,url:window.location.href,site:"twitch",entities:[e?{entityType:"channel",entityReference:{sourceType:"twitch",sourceName:e}}:null].filter(Boolean),tags:t}}chatMessagePost({body:e}){if(!e)return !1;let t=document.querySelector('[data-a-target="chat-input"]');if(!t)return !1;let n=function(e){let t=Object.keys(e).find((e=>e.startsWith("__reactInternalInstance$")||e.startsWith("__reactFiber$")));return t?e[t]:null}(t),a=$(n,(e=>null!=e.memoizedProps?.setInputValue));a.memoizedProps.value=e,a.memoizedProps.setInputValue(e),a.memoizedProps.onValueUpdate(e);let r=document.querySelector('[data-a-target="chat-send-button"]');return setTimeout((()=>{r?.click();}),0),!0}};function $(e,t){if(!e)return null;if(t(e))return e;let n=e.return;return n?$(n,t):null}var M=new Map,j=new class extends F{async getPageInfo(){let e=document.querySelector("ytd-app")?.data??document.querySelector("ytd-page-manager")?.data??document.querySelector("ytm-app")?.data,t=e?e?.playerResponse?.videoDetails:window.ytInitialPlayerResponse?.videoDetails,n=t?.channelId||"",a=t?.videoId||"",r=[];if(r.push("youtube"),t?.isLiveContent)r.push("youtube-live"),t.isLive?r.push("youtube-live-now"):t.isUpcoming?r.push("youtube-live-upcoming"):r.push("youtube-live-vod");else if(window.location.pathname.startsWith("/live_chat")){let e=await this._getVideoIdAndChannelId();n=e.channelId||n,a=e.videoId||"",r.push("youtube-live-chat-frame");}else r.push("youtube-non-live-video"),r.push("youtube-video");let i=e,o={name:t?.author,thumbnailUrlSrc:document.querySelector("#owner #avatar")?.inst?.__data?.thumbnail?.thumbnails?.[0]?.url},s={title:t?.title,description:t?.shortDescription,viewCount:t?.viewCount,ccv:i&&t?.isLive?b.getCcvByYtInitialData(i):null};return {title:t?.title||document.title,url:window.location.href,site:"youtube",entities:[n?{entityType:"channel",entityReference:{sourceType:"youtube",sourceId:n,sourceData:o}}:null,a?{entityType:"post",entityReference:{sourceType:"youtube",sourceId:a,sourceData:s}}:null].filter(Boolean),tags:r}}async _getVideoIdAndChannelId(){let e=this._getVideoIdFromPageUrl()||await this._getVideoIdFromDom();if(!e)return fetch("https://platform-chat-api.truffle.vip/error",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:"Unable to get videoId from page",url:window.location.href})}),{videoId:null,channelId:null};if(M.has(e))return {videoId:e,channelId:M.get(e)};try{let t=(await(await fetch(`https://platform-chat-api.truffle.vip/v/${e}`)).json()).channelId;return M.set(e,t),{videoId:e,channelId:t}}catch(t){return console.error("failed to get video info",t),{videoId:e,channelId:null}}}_getVideoIdFromPageUrl(){try{let e=new URLSearchParams(window.location.search).get("v");return e||(e=window.location.pathname?.match(/\/video\/([^/]+)/)?.[1]??null,e)}catch(e){console.warn("Unable to get videoId from page",e);}return null}async _getVideoIdFromDom(e=0){try{return ((document.querySelector("yt-live-chat-renderer")?.data?.continuations?.[0]?.invalidationContinuationData?.invalidationId?.topic).match(/chat~([^~]+)/)?.[1]??null)||(e>=3?null:(await new Promise((e=>setTimeout(e,500))),this._getVideoIdFromDom(e+1)))}catch(e){return console.warn("Unable to get videoId from page",e),null}}},B={genericSite:A,twitch:k,youtube:j};function H(){let e=function(e=window.location.href){switch(new URL(e).hostname.replace(/^www\./,"")){case"twitch.tv":case"player.twitch.tv":return "twitch";case"youtube.com":case"m.youtube.com":case"studio.youtube.com":return "youtube";default:return "genericSite"}}();return B[e].getPageInfo()}var W=[],q=!1,V={get:async(e,{paths:t,pick:n})=>{let a=[["ytcfg","data"],["ytcfg","data_"],["yt","config_"],["document","cookie"]];return t.map((e=>{if(!a.some((t=>JSON.stringify(t)===JSON.stringify(e))))throw new Error("Path not allowed");let t=e.reduce(((e,t)=>e?.[t]),globalThis);return n&&"object"==typeof t&&!Array.isArray(t)&&null!==t?n.reduce(((e,n)=>({...e,[n]:t?.[n]})),{}):t}))},webComponentMethod:async(e,{querySelector:t,method:n,args:a})=>{let r=document.querySelector(t);if(!r)throw new Error(`element not found: ${t}`);let i=r;if(!i[n])throw new Error(`method not found: ${n}`);return i[n](...a)},addFetchListener:(e,{urlRegexString:t},n)=>{let a=Math.random().toString();return W.push({id:a,urlRegexString:t,onFetch:n}),q||J(),{listenerId:a}},removeFetchListener:(e,{listenerId:t})=>{let n=W.findIndex((({id:e})=>e===t));-1!==n&&W.splice(n,1);},twitchChatMessagePost:(e,{body:t})=>k.chatMessagePost({body:t})},Y=navigator.userAgent.includes("Truffle")?function(e){return new r(new U,e)}:a;Y({namespace:"anyweb-to-client-privileged-api-v1",api:V,allowedOrigins:Y===a?["https://app.truffle.vip","https://truffle.vip",window.location.origin]:Y===a?["https://app.truffle.vip","https://truffle.vip","https://app.staging.bio","http://localhost:5173",window.location.origin]:void 0}).registerFrame(o(window));var J=()=>{q=!0;let e=window.fetch.bind(window);window.fetch=async function(t,n){let a=e(t,n);try{let e;if("string"==typeof t)e=t;else if(t instanceof Request)e=t.url;else {if(!(t instanceof URL))return a;e=t.href;}let r=W.filter((({urlRegexString:t})=>new RegExp(t).test(e)));if(0===r.length)return a;let i=await a;try{let t=i.text.bind(i),a=i.json.bind(i);i.text=async function(){let a=await t();try{let t={responseText:a,url:e,requestHeaders:n?.headers};return r.forEach((({onFetch:e})=>e(t))),a}catch{return a}},i.json=async function(){let t=await a();try{let a={responseText:JSON.stringify(t),url:e,requestHeaders:n?.headers};return r.forEach((({onFetch:e})=>e(a))),t}catch{return t}};}catch{return i}}catch{return a}return a};},K=(navigator.userAgent.includes("Truffle")?g$1:r$1)({providerWindow:window.top,namespace:"client-to-anyweb-unprivileged-api-v1",connectImmediately:!1});K.connect().catch((e=>{}));var z=K.api;(({onLayoutChange:t}={})=>{if(window.self!==window.top)return;let n=pe();n.onChange((({value:e})=>{z.pageInfoSet(e).catch((e=>{}));}));let a=async()=>{let e=await H();e.contentPageType=e.tags?.[e.tags.length-1]?.replace(/-([a-z])/g,(e=>e[1].toUpperCase())),e.contentPageOwnerRef=e.entities[0]?.entityReference.sourceId||e.entities[0]?.entityReference.sourceName,e.contentPageId=e.entities[1]?.entityReference.sourceId,n.set(e),t&&t(e);},r=()=>{let e=document.querySelector("body");if(!e)return console.error("body not found");let t=function(e,t=200){let n;return (...a)=>{clearTimeout(n),n=setTimeout((()=>e(...a)),t);}}(a,100);new MutationObserver(t).observe(e,{childList:!0,subtree:!0});};["interactive","complete"].includes(document.readyState)?r():window.addEventListener("DOMContentLoaded",r),setInterval(a,3e3),a();})(),"https://app.truffle.vip"!==window.location.origin&&"https://app.truffle.vip"!==window.location.origin||(window._truffleVersion="4.7.2");
